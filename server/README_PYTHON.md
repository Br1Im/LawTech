# LawTech FastAPI Backend

Новый бекенд на Python с FastAPI для проекта LawTech.

## Особенности

- ✅ FastAPI для высокой производительности
- ✅ SQLite база данных
- ✅ JWT аутентификация
- ✅ Регистрация и вход пользователей
- ✅ CORS настроен для фронтенда
- ✅ Готов для развертывания на Render

## Локальный запуск

### Требования
- Python 3.11+
- pip

### Установка зависимостей
```bash
cd server
pip install -r requirements.txt
```

### Запуск сервера
```bash
# Вариант 1: Через main.py
python main.py

# Вариант 2: Через start.py (с автоперезагрузкой)
python start.py

# Вариант 3: Напрямую через uvicorn
uvicorn main:app --host 0.0.0.0 --port 3001 --reload
```

Сервер будет доступен по адресу: http://localhost:3001

## API Эндпоинты

### Аутентификация
- `POST /api/auth/register` - Регистрация пользователя
- `POST /api/auth/login` - Вход пользователя
- `GET /api/auth/me` - Получение текущего пользователя (требует токен)

### Служебные
- `GET /api/health` - Проверка состояния сервера

## Структура базы данных

### Таблица users
- `id` - Уникальный идентификатор
- `username` - Имя пользователя
- `email` - Email (уникальный)
- `password` - Хешированный пароль
- `role` - Роль пользователя
- `office_id` - ID офиса (опционально)
- `created_at` - Дата создания
- `updated_at` - Дата обновления

## Развертывание на Render

Проект настроен для автоматического развертывания на Render через `render.yaml`.

### Переменные окружения на Render:
- `JWT_SECRET` - Секретный ключ для JWT токенов
- `PORT` - Порт сервера (обычно 10000 на Render)

## Миграция с Node.js

Этот Python бекенд заменяет предыдущий Node.js сервер и включает:
- Все основные функции аутентификации
- Совместимость с существующим фронтендом
- Упрощенную архитектуру без лишних зависимостей
- Лучшую производительность и стабильность

## Документация API

После запуска сервера документация API доступна по адресам:
- Swagger UI: http://localhost:3001/docs
- ReDoc: http://localhost:3001/redoc